<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<title>MEELAWFIRM | نظام كتابة العرائض والطلبات</title>

<!-- الخطوط -->
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">

<style>
/* =========================
   الإعدادات العامة
========================= */
*{
    box-sizing:border-box;
    font-family:'Cairo',sans-serif;
}

body{
    margin:0;
    background:#f4f6f8;
    color:#222;
}

header{
    background:#0f2a44;
    color:#fff;
    padding:15px;
    text-align:center;
    font-size:20px;
    font-weight:700;
}

.container{
    padding:15px;
    max-width:1200px;
    margin:auto;
}

/* =========================
   الأزرار
========================= */
button{
    background:#0f2a44;
    color:#fff;
    border:none;
    padding:10px 15px;
    border-radius:6px;
    cursor:pointer;
    font-size:14px;
}

button:hover{
    opacity:.9;
}

button.secondary{
    background:#6c757d;
}

button.danger{
    background:#b02a37;
}

/* =========================
   النماذج
========================= */
select, input, textarea{
    width:100%;
    padding:10px;
    margin:6px 0 12px;
    border:1px solid #ccc;
    border-radius:6px;
    font-size:14px;
}

label{
    font-weight:600;
    margin-top:10px;
    display:block;
}

/* =========================
   المعاينة
========================= */
.preview{
    background:#fff;
    border:1px solid #ddd;
    padding:15px;
    border-radius:6px;
    white-space:pre-wrap;
    line-height:1.9;
}

/* =========================
   الأقسام
========================= */
.section{
    background:#fff;
    padding:15px;
    margin-bottom:15px;
    border-radius:8px;
    box-shadow:0 0 5px rgba(0,0,0,.05);
}

.section h3{
    margin-top:0;
    font-size:18px;
    color:#0f2a44;
}
</style>
</head>

<body>

<header>
MEELAWFIRM  
<br>
<span style="font-size:14px;font-weight:400;">
نظام كتابة العرائض والطلبات
</span>
</header>

<div class="container">

<!-- =========================
     اختيار النموذج
========================= -->
<div class="section">
<h3>اختيار النموذج</h3>

<label>نوع العريضة / الطلب</label>
<select id="templateSelector">
<option value="">— اختر النموذج —</option>

<!-- سيتم تحميل جميع النماذج لاحقًا -->
</select>

</div>

<!-- =========================
     بيانات عامة
========================= -->
<div class="section">
<h3>البيانات العامة</h3>

<label>العنوان</label>
<input type="text" id="address">

<label>رقم الهاتف</label>
<input type="text" id="phone">

<label>اسم المحكمة / الجهة</label>
<input type="text" id="court">

<label>اسم مقدم الطلب</label>
<input type="text" id="applicant">

<label>اسم الخصم</label>
<input type="text" id="opponent">

</div>

<!-- =========================
     الحقول المتغيرة
========================= -->
<div class="section">
<h3>بيانات العريضة</h3>

<div id="dynamicFields">
<!-- يتم إنشاؤها حسب النموذج -->
</div>

</div>

<!-- =========================
     الأزرار
========================= -->
<div class="section">
<button onclick="generatePreview()">معاينة العريضة</button>
<button class="secondary" onclick="saveDraft()">حفظ مسودة</button>
<button class="secondary" onclick="printPreview()">طباعة</button>
</div>

<!-- =========================
     المعاينة
========================= -->
<div class="section">
<h3>المعاينة</h3>
<div class="preview" id="previewBox">
لم يتم إنشاء عريضة بعد.
</div>
</div>

</div> <!-- container -->

<script>
/* ======================================================
   سيتم إكمال JavaScript + النماذج + الإضافات تباعًا
====================================================== */
</script>

</body>
</html>
<script>
// ================================
// النماذج الجاهزة
// ================================
const templates = {
    "إخلاء محل": {
        fields: [
            {label:"تاريخ العقد", type:"date", id:"contractDate"},
            {label:"رقم العقد", type:"text", id:"contractNumber"},
            {label:"سبب الإخلاء", type:"textarea", id:"evictionReason"}
        ],
        templateText: `إلى السيد/ {court}
تحية طيبة وبعد،
أنا الموقع أدناه {applicant}، صاحب المحل المستأجر وفق العقد رقم {contractNumber} بتاريخ {contractDate}، أطلب منكم إخلاء المحل المذكور وذلك للأسباب التالية: {evictionReason}.`
    },

    "أجرة مثل": {
        fields: [
            {label:"تاريخ الاتفاق", type:"date", id:"agreementDate"},
            {label:"المبلغ المطلوب", type:"text", id:"amount"},
            {label:"وصف المكان", type:"textarea", id:"placeDescription"}
        ],
        templateText: `إلى السيد/ {court}
تحية طيبة وبعد،
أنا {applicant} أطالب بمبلغ {amount} كأجرة مثل عن الفترة من تاريخ {agreementDate} للمكان التالي: {placeDescription}.`
    },

    "فض شراكة": {
        fields: [
            {label:"تاريخ الشراكة", type:"date", id:"partnershipDate"},
            {label:"وصف الشراكة", type:"textarea", id:"partnershipDesc"},
            {label:"سبب الفض", type:"textarea", id:"terminationReason"}
        ],
        templateText: `إلى السيد/ {court}
تحية طيبة وبعد،
أنا {applicant} الشريك في الشراكة المبرمة بتاريخ {partnershipDate} والوصف التالي: {partnershipDesc}. أطلب فض الشراكة للأسباب التالية: {terminationReason}.`
    },

    "إثبات حيازة": {
        fields: [
            {label:"تاريخ الحيازة", type:"date", id:"possessionDate"},
            {label:"وصف العقار", type:"textarea", id:"propertyDesc"},
            {label:"الشهود", type:"textarea", id:"witnesses"}
        ],
        templateText: `إلى السيد/ {court}
تحية طيبة وبعد،
أنا {applicant}، أقر بحيازتي للعقار التالي: {propertyDesc} منذ تاريخ {possessionDate}. والشهود على ذلك: {witnesses}.`
    }
};

// ================================
// تحميل النماذج في القائمة
// ================================
const selector = document.getElementById("templateSelector");
for (let key in templates){
    let option = document.createElement("option");
    option.value = key;
    option.textContent = key;
    selector.appendChild(option);
}

// ================================
// إنشاء الحقول المتغيرة حسب النموذج
// ================================
selector.addEventListener("change", function(){
    const selected = this.value;
    const container = document.getElementById("dynamicFields");
    container.innerHTML = "";
    if(selected && templates[selected]){
        templates[selected].fields.forEach(f=>{
            const label = document.createElement("label");
            label.textContent = f.label;
            container.appendChild(label);

            let input;
            if(f.type==="textarea"){
                input = document.createElement("textarea");
            } else {
                input = document.createElement("input");
                input.type = f.type;
            }
            input.id = f.id;
            container.appendChild(input);
        });
    }
});

// ================================
// توليد المعاينة
// ================================
function generatePreview(){
    const selected = selector.value;
    if(!selected) return alert("اختر نموذج أولاً");

    let text = templates[selected].templateText;

    // بيانات عامة
    const generalFields = ["address","phone","court","applicant","opponent"];
    generalFields.forEach(id=>{
        const value = document.getElementById(id).value || "[فارغ]";
        text = text.replaceAll("{"+id+"}", value);
    });

    // الحقول الخاصة بالنموذج
    templates[selected].fields.forEach(f=>{
        const value = document.getElementById(f.id).value || "[فارغ]";
        text = text.replaceAll("{"+f.id+"}", value);
    });

    document.getElementById("previewBox").textContent = text;
}

// ================================
// حفظ مسودة في LocalStorage
// ================================
function saveDraft(){
    const selected = selector.value;
    if(!selected) return alert("اختر نموذج أولاً");
    const draft = {general:{},dynamic:{}};

    ["address","phone","court","applicant","opponent"].forEach(id=>{
        draft.general[id] = document.getElementById(id).value;
    });

    templates[selected].fields.forEach(f=>{
        draft.dynamic[f.id] = document.getElementById(f.id).value;
    });

    localStorage.setItem("draft_"+selected, JSON.stringify(draft));
    alert("تم حفظ المسودة بنجاح");
}

// ================================
// تحميل مسودة عند اختيار النموذج
// ================================
selector.addEventListener("change", function(){
    const selected = this.value;
    if(!selected) return;
    const draftRaw = localStorage.getItem("draft_"+selected);
    if(draftRaw){
        const draft = JSON.parse(draftRaw);
        Object.keys(draft.general).forEach(id=>{
            document.getElementById(id).value = draft.general[id];
        });
        templates[selected].fields.forEach(f=>{
            if(document.getElementById(f.id)){
                document.getElementById(f.id).value = draft.dynamic[f.id];
            }
        });
    }
});

// ================================
// الطباعة
// ================================
function printPreview(){
    const content = document.getElementById("previewBox").textContent;
    const w = window.open("", "_blank");
    w.document.write("<pre>"+content+"</pre>");
    w.print();
}
</script>
<script>
// ================================
// النماذج الجنائية
// ================================
templates["بلاغ طفل"] = {
    fields:[
        {label:"تاريخ البلاغ", type:"date", id:"reportDate"},
        {label:"اسم الطفل", type:"text", id:"childName"},
        {label:"تفاصيل البلاغ", type:"textarea", id:"reportDetails"}
    ],
    templateText:`إلى السيد/ {court}
تحية طيبة وبعد،
أنا {applicant} أبلغ عن الحالة التالية بتاريخ {reportDate} للطفل {childName}: {reportDetails}.`
};

templates["مخدرات"] = {
    fields:[
        {label:"تاريخ الحادث", type:"date", id:"incidentDate"},
        {label:"وصف المخالفة", type:"textarea", id:"incidentDesc"},
        {label:"المشتبه به", type:"text", id:"suspect"}
    ],
    templateText:`إلى السيد/ {court}
تحية طيبة وبعد،
أبلغ أنا {applicant} عن مخالفة تتعلق بالمخدرات بتاريخ {incidentDate}، التفاصيل: {incidentDesc}، والمشتبه به: {suspect}.`
};

templates["تعدي جنائي"] = {
    fields:[
        {label:"تاريخ التعدي", type:"date", id:"assaultDate"},
        {label:"وصف التعدي", type:"textarea", id:"assaultDesc"},
        {label:"المعتدي", type:"text", id:"assailant"}
    ],
    templateText:`إلى السيد/ {court}
تحية طيبة وبعد،
أنا {applicant} أبلغ عن تعدي حدث بتاريخ {assaultDate}، وصف التعدي: {assaultDesc}، المعتدي: {assailant}.`
};

// ================================
// نماذج الأحوال الشخصية
// ================================
templates["تطليق"] = {
    fields:[
        {label:"تاريخ الزواج", type:"date", id:"marriageDate"},
        {label:"اسم الزوج", type:"text", id:"husband"},
        {label:"سبب التطليق", type:"textarea", id:"divorceReason"}
    ],
    templateText:`إلى السيد/ {court}
تحية طيبة وبعد،
أنا {applicant} أطلب تطليقي من السيد {husband}، الزواج تم بتاريخ {marriageDate}، وذلك للأسباب التالية: {divorceReason}.`
};

templates["إثبات الطلاق"] = {
    fields:[
        {label:"تاريخ الطلاق", type:"date", id:"divorceDate"},
        {label:"اسم الزوجة", type:"text", id:"wife"},
        {label:"مكان الطلاق", type:"text", id:"divorcePlace"}
    ],
    templateText:`إلى السيد/ {court}
تحية طيبة وبعد،
أقر أنا {applicant} بأن الطلاق تم بتاريخ {divorceDate} بيني وبين السيدة {wife} في {divorcePlace}.`
};

templates["نفقات"] = {
    fields:[
        {label:"نوع النفقة", type:"text", id:"expenseType"},
        {label:"المبلغ", type:"text", id:"amount"},
        {label:"تاريخ الطلب", type:"date", id:"requestDate"}
    ],
    templateText:`إلى السيد/ {court}
تحية طيبة وبعد،
أنا {applicant} أطلب النفقة التالية: {expenseType}، المبلغ: {amount}، بتاريخ {requestDate}.`
};

// ================================
// تحديث قائمة النماذج بعد إضافة الجديدة
// ================================
function refreshSelector(){
    selector.innerHTML = "<option value=''>اختر النموذج</option>";
    for(let key in templates){
        let option = document.createElement("option");
        option.value = key;
        option.textContent = key;
        selector.appendChild(option);
    }
}
refreshSelector();
</script>
<style>
body {
    font-family: "Segoe UI", Tahoma, sans-serif;
    background: #f5f5f5;
    margin: 0; padding: 0;
}
.container {
    max-width: 900px;
    margin: 20px auto;
    background: #fff;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 0 15px rgba(0,0,0,0.1);
}
h1 {
    text-align: center;
    color: #333;
}
label {
    display: block;
    margin-top: 10px;
    font-weight: bold;
}
input, textarea, select {
    width: 100%;
    padding: 8px 10px;
    margin-top: 5px;
    border-radius: 6px;
    border: 1px solid #ccc;
    box-sizing: border-box;
}
textarea {
    min-height: 80px;
}
button {
    margin-top: 15px;
    padding: 10px 15px;
    border: none;
    border-radius: 6px;
    background: #0078D7;
    color: #fff;
    font-size: 16px;
    cursor: pointer;
}
button:hover { background: #005a9e; }
.preview {
    margin-top: 20px;
    padding: 15px;
    background: #e8f0fe;
    border-radius: 8px;
    white-space: pre-line;
}
</style>

<div class="container">
    <h1>نظام MEELAWFIRM لكتابة العرائض</h1>

    <label>اختر النموذج:</label>
    <select id="templateSelector"></select>

    <label>اسم مقدم الطلب:</label>
    <input type="text" id="applicant">

    <label>الطرف الآخر:</label>
    <input type="text" id="opponent">

    <label>المحكمة/الجهة:</label>
    <input type="text" id="court">

    <label>العنوان:</label>
    <input type="text" id="address">

    <label>رقم الهاتف:</label>
    <input type="text" id="phone">

    <div id="dynamicFields"></div>

    <button onclick="generateLetter()">معاينة العريضة</button>
    <button onclick="printLetter()">طباعة العريضة</button>

    <div class="preview" id="letterPreview"></div>
</div>

<script>
const selector = document.getElementById("templateSelector");
const dynamicFieldsContainer = document.getElementById("dynamicFields");
const previewDiv = document.getElementById("letterPreview");

selector.addEventListener("change", () => {
    dynamicFieldsContainer.innerHTML = "";
    const tmpl = templates[selector.value];
    if(!tmpl) return;
    tmpl.fields.forEach(f => {
        const lbl = document.createElement("label");
        lbl.textContent = f.label;
        dynamicFieldsContainer.appendChild(lbl);
        let input;
        if(f.type === "textarea") input = document.createElement("textarea");
        else input = document.createElement("input");
        input.type = f.type !== "textarea" ? f.type : "";
        input.id = f.id;
        dynamicFieldsContainer.appendChild(input);
    });
});

function generateLetter(){
    if(!selector.value) return alert("اختر النموذج أولاً");
    let tmpl = templates[selector.value].templateText;
    tmpl = tmpl.replace("{applicant}", document.getElementById("applicant").value || "");
    tmpl = tmpl.replace("{opponent}", document.getElementById("opponent").value || "");
    tmpl = tmpl.replace("{court}", document.getElementById("court").value || "");
    tmpl = tmpl.replace("{address}", document.getElementById("address").value || "");
    tmpl = tmpl.replace("{phone}", document.getElementById("phone").value || "");

    templates[selector.value].fields.forEach(f=>{
        const val = document.getElementById(f.id)?.value || "";
        const regex = new RegExp(`{${f.id}}`, "g");
        tmpl = tmpl.replace(regex, val);
    });

    previewDiv.textContent = tmpl;
}

function printLetter(){
    const content = previewDiv.textContent;
    if(!content) return alert("لا توجد عريضة للمعاينة");
    const w = window.open();
    w.document.write(`<pre>${content}</pre>`);
    w.print();
}
</script>
<script>
// جميع النماذج المحفوظة سابقاً
const templates = {
    "ايجار_معرض": {
        label: "عريضة استئجار معرض",
        fields: [
            {id:"rentalPeriod", label:"مدة الاستئجار", type:"text"},
            {id:"rentalAmount", label:"مبلغ الإيجار", type:"text"},
            {id:"remarks", label:"ملاحظات إضافية", type:"textarea"}
        ],
        templateText: `السيد/ {court} المحترم
الموضوع: طلب استئجار معرض
أنا الموقع أدناه {applicant}، أطلب استئجار المعرض من الطرف {opponent} لمدة {rentalPeriod} مقابل مبلغ {rentalAmount}.
العنوان: {address}
الهاتف: {phone}
ملاحظات: {remarks}
وتفضلوا بقبول فائق الاحترام.`
    },
    "فض_شراكة": {
        label: "عريضة فض شراكة",
        fields: [
            {id:"partnershipDetails", label:"تفاصيل الشراكة", type:"textarea"},
            {id:"disputePoints", label:"نقاط النزاع", type:"textarea"}
        ],
        templateText: `السيد/ {court} المحترم
الموضوع: طلب فض شراكة
أنا الموقع {applicant} أطلب فض الشراكة مع {opponent}.
تفاصيل الشراكة: {partnershipDetails}
نقاط النزاع: {disputePoints}
العنوان: {address}
الهاتف: {phone}
وتفضلوا بقبول فائق الاحترام.`
    },
    "اثبات_حيازة": {
        label: "عريضة إثبات حيازة",
        fields: [
            {id:"propertyDetails", label:"تفاصيل العقار أو الأثاث", type:"textarea"},
            {id:"witnesses", label:"الشهود", type:"textarea"}
        ],
        templateText: `السيد/ {court} المحترم
الموضوع: طلب إثبات حيازة
أنا الموقع {applicant} أطلب إثبات حيازتي لـ {propertyDetails} ضد {opponent}.
الشهود: {witnesses}
العنوان: {address}
الهاتف: {phone}
وتفضلوا بقبول فائق الاحترام.`
    },
    "بلاغ_جنائي": {
        label: "بلاغ جنائي",
        fields: [
            {id:"incidentDetails", label:"تفاصيل الواقعة", type:"textarea"},
            {id:"accused", label:"المتهم", type:"text"}
        ],
        templateText: `السيد/ {court} المحترم
الموضوع: بلاغ جنائي
أنا الموقع {applicant} أبلغ عن {incidentDetails} ضد {accused}.
العنوان: {address}
الهاتف: {phone}
وتفضلوا بقبول فائق الاحترام.`
    },
    "نفقات": {
        label: "طلب نفقات",
        fields: [
            {id:"expenseDetails", label:"تفاصيل النفقات", type:"textarea"},
            {id:"amount", label:"المبلغ المطلوب", type:"text"}
        ],
        templateText: `السيد/ {court} المحترم
الموضوع: طلب نفقات
أنا الموقع {applicant} أطلب نفقات بمبلغ {amount} عن {expenseDetails} ضد {opponent}.
العنوان: {address}
الهاتف: {phone}
وتفضلوا بقبول فائق الاحترام.`
    }
};

// تهيئة قائمة النماذج عند تحميل الصفحة
window.onload = function(){
    const sel = document.getElementById("templateSelector");
    Object.keys(templates).forEach(key => {
        const opt = document.createElement("option");
        opt.value = key;
        opt.textContent = templates[key].label;
        sel.appendChild(opt);
    });
};
</script>
