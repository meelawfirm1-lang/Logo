// مصفوفة البيانات الضخمة لكافة النماذج القانونية
const legalTemplates = {
    // ==========================================
    // 1. القسم الجنائي
    // ==========================================
    'crim_1': {
        title: "عريضة فتح بلاغ جنائي",
        courtType: "السيد وكيل نيابة",
        body: "أعرض لسيادتكم أنه بتاريخ ...../...../2025م قام المشكو في حقه المذكور أعلاه بـ (تذكر تفاصيل الواقعة بدقة)، وحيث أن هذا الفعل يشكل جريمة تحت طائلة القانون الجنائي السوداني.",
        requests: "ألتمس من سيادتكم التكرم بالموافقة على قيد بلاغ جنائي واتخاذ الإجراءات القانونية اللازمة."
    },
    'crim_2': {
        title: "طلب إطلاق سراح بالضمان",
        courtType: "السيد وكيل نيابة / قاضي محكمة",
        body: "المتهم مقبوض على ذمة البلاغ رقم (....) تحت المادة (....)، وحيث أن الجريمة من المواد التي يجوز فيها الضمان، والمتهم لديه ضامن كفء ومقر سكن ثابت ولا يخشى هروبه.",
        requests: "ألتمس إطلاق سراح المتهم بالضمانة التي تراها عدالة المحكمة/النيابة مناسبة."
    },

    // ==========================================
    // 2. القسم المدني
    // ==========================================
    'civ_1': {
        title: "دعوى مطالبة مالية",
        courtType: "قاضي محكمة الموضوع",
        body: "المدعى عليه مدين للمدعي بمبلغ وقدره (....) وذلك بموجب (شيك/عقد/إيصال أمانة) وقد طالبناه بالسداد مراراً وتكراراً دون جدوى.",
        requests: "الحكم بإلزام المدعى عليه بدفع المبلغ المذكور مع الرسوم والأتعاب."
    },
    'civ_2': {
        title: "دعوى إخلاء عقار",
        courtType: "قاضي محكمة الموضوع",
        body: "المدعي يمتلك العقار رقم (....) والمدعى عليه يستأجر العقار بموجب عقد إيجار، وقد أخل المدعى عليه بالتزاماته (ذكر السبب مثل عدم سداد الأجرة)، وطالبناه بالإخلاء ولم يستجب.",
        requests: "الحكم بإخلاء العقار وتسليمه للمدعي خالياً من الشواغل."
    },

    // ==========================================
    // 3. قسم الأحوال الشخصية (النفقات)
    // ==========================================
    'fam_n_wife': {
        title: "دعوى نفقة زوجية",
        courtType: "قاضي محكمة الأحوال الشخصية",
        body: "1/ المدعية زوجة شرعية للمدعى عليه وفي عصمته وطاعته.\n2/ المدعية تستحق عليه نفقة الزوجية لكنه امتنع عنها دون مبرر شرعي منذ تاريخ ..../..../2022م مع أنه ميسور الحال من عمله (تذكر عمله).\n3/ تقدر المدعية مبلغ (     ) شهرياً للطعام والإيدام ومبلغ (     ) كل ستة أشهر لبدل كسوتها.",
        requests: "أ/ نفقة زوجية سابقة تقدر بمبلغ (  ) من تاريخ قطعها.\nب/ الحكم لها بالطعام والإيدام شهرياً مبلغ (  ) جنيه.\nج/ ولبدل كسوتها كل ستة أشهر مبلغ (    ) جنيه."
    },
    'fam_n_kids': {
        title: "دعوى نفقة بنوة",
        courtType: "قاضي محكمة الأحوال الشخصية",
        body: "1/ المدعية كانت زوجة شرعية للمدعى عليه (أو ما زال زوجاً لها).\n2/ رزقت منه بالأولاد (أسماؤهم وأعمارهم) وهم بيدها للحضانة.\n3/ أبناء المدعى عليه يستحقون عليه النفقة لكنه امتنع عنها دون مبرر شرعي منذ تاريخ (.....) مع أنه ميسور الحال.",
        requests: "أ/ نفقة بنوة سابقة من تاريخ القطع.\nب/ الحكم للأبناء للطعام والإيدام شهرياً مبلغ (  ) جنيهاً بالسوية بينهم.\nج/ وبدل كسوة كل أربعة أشهر مبلغ (  ) جنيهاً، وللمسكن مبلغ (  ) شهرياً."
    },
    'fam_n_increase': {
        title: "دعوى زيادة نفقة بنوة",
        courtType: "قاضي محكمة الأحوال الشخصية",
        body: "1/ سبق وأن فرضت لهذه المحكمة للأولاد نفقة بموجب الحكم رقم (....).\n2/ نسبة لارتفاع تكاليف الحياة ولزيادة أعمار الأولاد وازدياد دخل المدعى عليه نلتمس الزيادة.",
        requests: "الحكم بزيادة نفقة الطعام والكسوة والسكن أصلاً وزيادة."
    },
    'fam_n_siblings': {
        title: "دعوى نفقة إخوة",
        courtType: "قاضي محكمة الأحوال الشخصية",
        body: "1/ المدعى عليه هو أخ لأب للمدعية.\n2/ المدعية فقيرة ولا دخل لها ولا زوج ونفقتها واجبة على المدعى عليه وهو مقصر فيها ويُفضل من كسبه ما يمكن فرض نفقة عليه.\n3/ المدعى عليه لديه مرتب وهو لا يعول سوى نفسه.",
        requests: "الحكم لها بنفقة إخوة مبلغ (     ) جنيه شهرياً."
    },
    'fam_n_parents': {
        title: "دعوى نفقة أبوة",
        courtType: "قاضي محكمة الأحوال الشخصية",
        body: "1/ المدعى عليه هو ولد المدعي نسباً.\n2/ المدعي فقير ونفقته واجبة على المدعى عليه ويُفضل من كسبه ما يمكن فرض نفقة عليه.\n3/ المدعى عليه لديه مرتب ثابت ولا يعول سوى نفسه.",
        requests: "الحكم له بنفقة أبوة مبلغ (      ) جنيهاً شهرياً."
    },
    'fam_n_waiting': {
        title: "دعوى نفقة عدة ومتعة",
        courtType: "قاضي محكمة الأحوال الشخصية",
        body: "1/ المدعية كانت زوجة للمدعى عليه وطلقها بتاريخ ..../..../2022م طلقة أولى رجعية ولم يرجعها.\n2/ تستحق المدعية نفقة عدة ومتعة لمدة 6 أشهر ولم يدفعها رغم استحقاقها ويسار حاله.",
        requests: "أ/ نفقة عدة مبلغ (    ) جنيه.\nب/ نفقة متعة لمدة 6 أشهر مبلغ (    ) جنيه."
    },

    // ==========================================
    // 4. قسم الأموال (مؤخر، خطبة، أمتعة)
    // ==========================================
    'fam_m_dowry': {
        title: "مطالبة بمؤخر صداق",
        courtType: "قاضي محكمة الأحوال الشخصية",
        body: "1/ المدعية كانت زوجة للمدعى عليه بموجب الوثيقة رقم (....).\n2/ تضمن العقد مؤخر صداق مبلغه (....) يحل لأقرب الأجلين (الطلاق أو الوفاة).\n3/ وقع الطلاق وخرجت المدعية من عدتها ولم يسلمها المؤخر.",
        requests: "الحكم للمدعية بمؤخر صداقها المذكور في وثيقة الزواج."
    },
    'fam_m_engagement': {
        title: "رد مال خطبة",
        courtType: "قاضي محكمة الأحوال الشخصية",
        body: "1/ المدعي خطب المدعى عليها وقدم لها شبكة (وصفها) وهدايا ومهر مبلغ (....).\n2/ المدعى عليها عدلت عن الخطبة دون مقتضى.",
        requests: "أ/ رد المهر والشبكة والهدايا عيناً.\nب/ قيمتها إن هلكت مبلغ (    )."
    },
    'fam_m_furniture': {
        title: "دعوى أمتعة منزلية",
        courtType: "قاضي محكمة الأحوال الشخصية",
        body: "1/ المدعية كانت زوجة للمدعى عليه وقد طلقها.\n2/ لها أمتعة بيده (تذكر بالتفصيل والقيمة) وهي ملكها الخاص وجحدها ورفض تسليمها.",
        requests: "تسليم الأمتعة عيناً أو قيمتها المقدرة بالفواتير."
    },

    // ==========================================
    // 5. قسم المواد والنسب
    // ==========================================
    'fam_z_marry_perm': {
        title: "مادة إذن زواج (عضل ولي)",
        courtType: "قاضي محكمة الأحوال الشخصية",
        body: "1/ المدعى عليه هو والد المدعية وهي بكر بالغ.\n2/ تقدم لها كفء (اسمه) إلا أن والدها عضلها ورفض دون مسوغ شرعي.",
        requests: "منحها الإذن بالزواج بولاية من تراه المحكمة."
    },
    'fam_h_origin': {
        title: "دعوى إثبات نسب",
        courtType: "قاضي محكمة الأحوال الشخصية",
        body: "1/ المدعية زوجة للمدعى عليه، ورزقت منه على فراش الزوجية بالولد (اسمه).\n2/ المدعى عليه رفض الإقرار بأبوته.",
        requests: "الحكم بثبوت صحة نسب الصغير إلى المدعى عليه."
    }
};

// تحديث المسميات تلقائياً
function updateLabels() {
    const type = document.getElementById('petitionType').value;
    const p1 = document.getElementById('p1Label');
    const p2 = document.getElementById('p2Label');
    
    if (type.includes('_z_') || type.includes('_confirm')) {
        p1.innerText = "مقدم/ة المادة";
        p2.innerText = "الطرف المستدعى (إن وجد)";
    } else if (type.startsWith('crim')) {
        p1.innerText = "الشاكي / المتضرر";
        p2.innerText = "المشكو في حقه";
    } else {
        p1.innerText = "المدعي / المدعية";
        p2.innerText = "المدعى عليه";
    }
}

// توليد العريضة
function generatePetition() {
    const type = document.getElementById('petitionType').value;
    const court = document.getElementById('courtName').value || "................";
    const party1 = document.getElementById('party1').value || "................";
    const party2 = document.getElementById('party2').value || "................";
    const output = document.getElementById('petitionOutput');

    if (!type) { alert("لطفاً اختر نوع العريضة"); return; }

    const template = legalTemplates[type];
    const year = new Date().getFullYear();

    output.innerHTML = `
        <div style="text-align: right; border-bottom: 2px solid #000; padding-bottom: 10px;">
            <strong>لدى محكمة:</strong> ${court}<br>
            <strong>التاريخ:</strong> ${new Date().toLocaleDateString('ar-EG')}م
        </div>

        <div style="margin: 30px 0;">
            <div style="display: flex; justify-content: space-between;">
                <strong>${party1}</strong>
                <span>(طرف أول)</span>
            </div>
            <div style="text-align: center; font-weight: bold; font-size: 1.5rem; margin: 10px 0;">ضـــد</div>
            <div style="display: flex; justify-content: space-between;">
                <strong>${party2}</strong>
                <span>(طرف ثاني)</span>
            </div>
        </div>

        <div style="text-align: center; margin: 20px 0;">
            <h4 style="text-decoration: underline; font-weight: bold;">الموضوع / ${template.title}</h4>
        </div>

        <p><strong>السيد/ ${template.courtType} الموقر</strong></p>
        
        <p>بكل احترام وتقدير نلتمس قيد هذه العريضة في مواجهة الطرف الثاني للأسباب التالية:</p>
        
        <div style="white-space: pre-line; margin-bottom: 20px;">${template.body}</div>

        <p><strong>لكل ما تقدم نلتمس من عدالتكم الحكم بالآتي:</strong></p>
        <div style="background: #f9f9f9; padding: 15px; border-right: 5px solid #c5a059;">
            ${template.requests}
        </div>

        <div style="margin-top: 80px; text-align: left;">
            <p>ولعدالتكم فائق الاحترام والتقدير،،</p>
            <br>
            <p>مقدم العريضة: .............................</p>
        </div>
        
        <div class="no-print" style="margin-top: 50px; border-top: 1px dashed #ccc; padding-top: 10px; font-size: 0.8rem; color: #666;">
            رقم النسخة: MEELAW-2025-AUTO | تم التوليد آلياً
        </div>
    `;
}
