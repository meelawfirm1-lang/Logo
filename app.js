// ==========================================
// المكتبة القانونية الشاملة - كافة النماذج دون استثناء
// ==========================================
const legalTemplates = {
    // ----- القسم الأول: الدائرة المدنية والإيجارات (15 نموذج) -----
    'civ_nuisance': {
        title: "دعوى إخلاء للإزعاج أو أفعال منافية للآداب",
        header: "السيد/ قاضي محكمة ................ الجزئية الموقر",
        body: "1. المدعى عليه يستأجر العقار رقم (    ) مدينة (    ).\n2. المدعي هو جار للسكن للمدعى عليه من الناحية (.........).\n3. المدعى عليه قام بـ (تذكر الأفعال) مما سببت إزعاجاً أو هي أفعال منافية للآداب تضرر منها المدعي.\n4. المدعي أنذر مانح إيجارة العقار للمدعى عليه وطالبه بأن يوقف المدعى عليه الضرر ولكن رفض ذلك رغم إنذاره المتكرر.",
        requests: "أ/ الإخلاء لارتكاب المدعى عليه أفعال منافية للآداب أو الإزعاج.\nب/ الرسوم وأتعاب المحاماة الاتفاقية البالغ قدرها (    ).\nج/ لأجل الرسوم تقدر قيمة الدعوى بـ (    )."
    },
    'civ_sublease': {
        title: "دعوى إخلاء للإيجارة من الباطن",
        header: "السيد/ قاضي محكمة ................ الجزئية الموقر",
        body: "1. المدعي هو مانح إيجارة العقار رقم (    ) مدينة (    ) للمدعى عليه الأول.\n2. المدعى عليه يستأجر العقار المذكور أعلاه بأجرة شهرية قدرها (    ) بموجب عقد مكتوب.\n3. المدعى عليه الأول قام بإيجار العقار المذكور في الفقرة (1) للمدعى عليه الثاني من الباطن ودون علم وموافقة المدعي.",
        requests: "أ/ إخلاء المدعى عليهما الأول والثاني للإيجارة من الباطن.\nب/ الرسوم وأتعاب المحاماة الاتفاقية البالغ قدرها (    )."
    },
    'civ_alteration': {
        title: "دعوى إخلاء لإجراء تغييرات جوهرية",
        header: "السيد/ قاضي محكمة ................ الجزئية الموقر",
        body: "1. المدعي هو مانح إيجارة العقار رقم (    ) مدينة (    ) للمدعى عليه.\n2. المدعى عليه يستأجر العقار المذكور أعلاه بأجرة شهرية قدرها (    ) بموجب عقد مكتوب.\n3. المدعى عليه قام بـ (تذكر التغييرات مثل بني حيطة/فتح باب) دون علم المدعي بذلك.",
        requests: "أ/ الإخلاء لإجراء تغييرات جوهرية.\nب/ الرسوم وأتعاب المحاماة الاتفاقية البالغ قدرها (    )."
    },
    'civ_new_owner': {
        title: "دعوى إخلاء للمالك الجديد",
        header: "السيد/ قاضي محكمة ................ الجزئية الموقر",
        body: "1. المدعي هو المالك الجديد للعقار رقم (    ) مدينة (    ).\n2. المدعى عليه يستأجر العقار المذكور أعلاه بأجرة شهرية قدرها (    ) بموجب عقد مكتوب.\n3. المدعي أنذر المدعى عليه بإنذار مكتوب بتاريخ ../../.... وطالبه بإخلاء العقار بصفته المالك الجديد.",
        requests: "أ/ الإخلاء للمالك الجديد.\nب/ الرسوم وأتعاب المحاماة."
    },
    'civ_judgment_end': {
        title: "دعوى إخلاء لانتهاء الإجارة الحكمية",
        header: "السيد/ قاضي محكمة ................ الجزئية الموقر",
        body: "1. المدعي هو مانح إيجار العقار رقم (    ) مدينة (    ).\n2. المدعى عليه يستأجر العقار المذكور أعلاه بأجرة شهرية قدرها (    ).\n3. بدأت الإجارة التعاقدية من ../../.... إلى ../../.... وبدأت الإجارة الحكمية من ../../.... وبذلك تكون قد انتهت.",
        requests: "أ/ الإخلاء لانتهاء الإجارة الحكمية.\nب/ الرسوم وأتعاب المحاماة."
    },
    'civ_fair_rent': {
        title: "دعوى أجرة مثل",
        header: "السيد/ قاضي محكمة ................ الجزئية الموقر",
        body: "1. المدعي هو المالك المسجل للعقار رقم (    ).\n2. المدعى عليه يستأجر العقار بأجرة (    ) بموجب عقد مكتوب.\n3. منذ ../../.... وحتى الآن تغيرت الظروف الاقتصادية والتضخم، والأجرة الحالية لا تتناسب مع أجرة المثل في المنطقة.",
        requests: "أ/ تعديل الأجرة لتصبح مبلغ (    ).\nب/ الرسوم وأتعاب المحاماة."
    },
    'civ_partnership': {
        title: "دعوى فض شراكة",
        header: "السيد/ قاضي محكمة ................ الجزئية الموقر",
        body: "1. المدعي والمدعى عليه يعملان في (تذكر العمل) بموجب عقد شراكة مكتوب.\n2. الاتفاق هو أن تكون الأرباح مناصفة.\n3. خالف المدعى عليه العقد حيث عرض أرباحاً (    ) والواقع هو (    ).",
        requests: "أ/ فض الشراكة.\nب/ دفع الأرباح المتأخرة.\nج/ الرسوم والأتعاب."
    },
    'civ_possession': {
        title: "دعوى إثبات حيازة",
        header: "السيد/ قاضي محكمة ................ الجزئية الموقر",
        body: "1. المدعي هو الحائز على القطعة (....) حيازة هادئة مستقرة منذ عام (....).\n2. قام المدعى عليه بالتعدي بـ (تذكر الفعل) منذ تاريخ (....).\n3. طالب المدعي بالإخلاء ورفض المدعى عليه دون سند.",
        requests: "أ/ إثبات حيازة القطعة.\nب/ إلزام المدعى عليه بالإخلاء وإزالة التعدي."
    },
    'civ_labour': {
        title: "عريضة دعوى عمل",
        header: "السيد/ قاضي محكمة العمل ................ الموقر",
        body: "1/ المدعي كان يعمل مع المدعى عليه بوظيفة (....) منذ ../../....\n2/ لم يتمتع المدعي بالإجازات السنوية ولا الأجر الإضافي.\n3/ فصل المدعى عليه المدعي فصلاً تعسفياً مخلاً بالاتفاق.",
        requests: "أ/ البديل النقدي للإجازات.\nب/ التعويض عن الفصل التعسفي.\nج/ مكافأة نهاية الخدمة."
    },
    'civ_money_1': {
        title: "دعوى مطالبة مالية (بضاعة)",
        header: "السيد/ قاضي محكمة ................ الجزئية الموقر",
        body: "1. اشترى المدعى عليه من المدعي بضاعة بمبلغ (    ).\n2. التزم المدعى عليه بسداد القيمة في ../../.... ولكنه لم يسدد رغم المطالبة.",
        requests: "أ/ إلزام المدعى عليه بدفع مبلغ (    ).\nب/ أتعاب المحاماة."
    },
    'civ_money_2': {
        title: "دعوى مطالبة مالية (مديونية)",
        header: "السيد/ قاضي محكمة ................ الجزئية الموقر",
        body: "1. سلم المدعي المدعى عليه مبلغ (    ) كمديونية.\n2. عند حلول موعد السداد ظل المدعى عليه يماطل ويتهرب.",
        requests: "أ/ إلزام المدعى عليه بسداد مبلغ (    )."
    },
    'civ_sale_confirm': {
        title: "دعوى إثبات بيع",
        header: "السيد/ قاضي محكمة ................ الجزئية الموقر",
        body: "1. اشترى المدعي من المدعى عليه المنزل رقم (    ) مربع (    ).\n2. سلم المدعي المبلغ كاملاً (    ) ولم يقم المدعى عليه بتحويل السجل.",
        requests: "أ/ إثبات بيع المنزل.\nب/ مخاطبة التسجيلات لتحويل السجل باسم المدعي."
    },
    'civ_easement': {
        title: "دعوى حق الارتفاق",
        header: "السيد/ قاضي محكمة ................ الجزئية الموقر",
        body: "1. المدعي والمدعى عليه جيران.\n2. قام المدعى عليه بفتح نوافذ تطل على عقار المدعي مما سبب ضرراً.\n3. رفض المدعى عليه إقفالها رغم المطالبة.",
        requests: "أ/ إزالة الضرر.\nب/ تعويض المدعي مبلغ (    )."
    },
    'civ_urgent_need': {
        title: "دعوى إخلاء للحوجة الماسة",
        header: "السيد/ قاضي محكمة ................ الجزئية الموقر",
        body: "1. المدعي هو المالك ويحتاج للعقار حاجة ماسة للسكنى لغلاء المعيشة.\n2. المدعي يسكن حالياً بالإيجار ويريد استرداد ملكه.",
        requests: "أ/ الإخلاء للحاجة الماسة للسكنى."
    },
    'civ_failure_pay': {
        title: "دعوى إخلاء للفشل في السداد",
        header: "السيد/ قاضي محكمة ................ الجزئية الموقر",
        body: "1. يستأجر المدعى عليه العقار بأجرة شهرية (    ).\n2. فشل المدعى عليه في سداد أجرة شهر (    ) من العام الحالي.",
        requests: "أ/ الإخلاء للفشل في السداد.\nب/ متأخرات الأجرة (    )."
    },

    // ----- القسم الثاني: الجنائي (نموذجان) -----
    'crim_1': {
        title: "عريضة فتح بلاغ جنائي",
        header: "السيد/ وكيل نيابة .................... الموقر",
        body: "أعرض لسيادتكم أنه بتاريخ ...../...../2025م قام المشكو في حقه بـ (ذكر الواقعة)، وحيث أن الفعل يشكل جريمة تحت طائلة القانون الجنائي.",
        requests: "الموافقة على قيد بلاغ جنائي واتخاذ الإجراءات."
    },
    'crim_2': {
        title: "طلب إطلاق سراح بالضمان",
        header: "السيد/ وكيل نيابة / قاضي محكمة ........... الموقر",
        body: "المتهم مقبوض في البلاغ (....)، والجريمة يجوز فيها الضمان، والمتهم لديه ضامن كفء ومقر ثابت.",
        requests: "إطلاق سراح المتهم بالضمانة المناسبة."
    },

    // ----- القسم الثالث: الأحوال شخصية (10 نماذج) -----
    'fam_n_wife': {
        title: "دعوى نفقة زوجية",
        header: "السيد/ قاضي محكمة ........... للأحوال الشخصية الموقر",
        body: "1/ المدعية زوجة شرعية وفي عصمة المدعى عليه.\n2/ امتنع عن نفقتها منذ تاريخ (....) وهو ميسور الحال.",
        requests: "أ/ نفقة سابقة.\nب/ نفقة طعام وكسوة مستمرة."
    },
    'fam_z_harm': {
        title: "دعوى تطليق للضرر والشقاق",
        header: "السيد/ قاضي محكمة ........... للأحوال الشخصية الموقر",
        body: "1/ المدعية زوجة شرعية.\n2/ تضررت من المدعى عليه ضرراً يتعذر معه دوام العشرة (ذكر الضرر).\n3/ عجز الأجاويد عن الإصلاح.",
        requests: "الحكم بالتطليق للضرر والشقاق."
    },
    'fam_z_khula': {
        title: "دعوى تطليق للفدية (خلع)",
        header: "السيد/ قاضي محكمة ........... للأحوال الشخصية الموقر",
        body: "1/ المدعية تبغض الحياة مع المدعى عليه وتخشى ألا تقيم حدود الله.\n2/ مستعدة للتنازل عن حقوقها المالية افتداءً لنفسها.",
        requests: "الحكم بالتطليق للفدية (خلعاً)."
    },
    'fam_n_kids': {
        title: "دعوى نفقة بنوة",
        header: "السيد/ قاضي محكمة ........... للأحوال الشخصية الموقر",
        body: "1/ المدعية حاضنة للأطفال (....) من المدعى عليه.\n2/ امتنع والدهم عن النفقة رغم يسار حاله.",
        requests: "نفقة طعام وكسوة وسكن للأبناء."
    },
    'fam_m_gold': {
        title: "دعوى استرداد مصاغ ذهبي",
        header: "السيد/ قاضي محكمة ........... للأحوال الشخصية الموقر",
        body: "1/ المدعية تملك ذهباً (وصفه) كان بعهدتها.\n2/ قام المدعى عليه بأخذه أو جحده ورفض رده.",
        requests: "رد الذهب عيناً أو قيمته."
    },
    'fam_h_travel': {
        title: "دعوى إذن سفر بالمحضون",
        header: "السيد/ قاضي محكمة ........... للأحوال الشخصية الموقر",
        body: "1/ المدعية حاضنة للطفل وترغب بالسفر لغرض (....).\n2/ رفض الوالد الإذن دون مسوغ شرعي.",
        requests: "منح الإذن بالسفر بالمحضون."
    },
    'fam_z_marry': {
        title: "مادة إذن زواج (عضل ولي)",
        header: "السيد/ قاضي محكمة ........... للأحوال الشخصية الموقر",
        body: "1/ المدعية بكر بالغ تقدم لها كفء.\n2/ والدها (المدعى عليه) عضلها ورفض تزويجها دون سبب.",
        requests: "الإذن بالزواج بولاية المحكمة."
    },
    'fam_h_origin': {
        title: "دعوى إثبات نسب",
        header: "السيد/ قاضي محكمة ........... للأحوال الشخصية الموقر",
        body: "1/ رزقت المدعية بالولد (....) على فراش الزوجية.\n2/ المدعى عليه يرفض الإقرار بنسبه.",
        requests: "الحكم بثبوت النسب."
    },
    'fam_z_obey': {
        title: "دعوى طاعة",
        header: "السيد/ قاضي محكمة ........... للأحوال الشخصية الموقر",
        body: "1/ المدعى عليها زوجة خرجت من منزل الزوجية دون إذن.\n2/ المسكن مهيأ والمدعي مأمون عليها.",
        requests: "إلزام الزوجة بالدخول في الطاعة."
    },
    'fam_m_furniture': {
        title: "دعوى أمتعة منزلية",
        header: "السيد/ قاضي محكمة ........... للأحوال الشخصية الموقر",
        body: "1/ المدعية لها أمتعة (تذكر بالتفصيل) وهي ملكها.\n2/ المدعى عليه يحوزها ويرفض تسليمها بعد الطلاق.",
        requests: "تسليم الأمتعة أو قيمتها."
    }
};

// وظائف التفاعل مع الواجهة
function updateLabels() {
    const type = document.getElementById('petitionType').value;
    const p1 = document.getElementById('p1Label');
    const p2 = document.getElementById('p2Label');
    
    if (type.startsWith('crim')) {
        p1.innerText = "الشاكي / مقدم الطلب";
        p2.innerText = "المشكو في حقه / المتهم";
    } else if (type.includes('_z_') || type.startsWith('fam_h')) {
        p1.innerText = "المدعية / مقدمة المادة";
        p2.innerText = "المدعى عليه / المستدعى ضده";
    } else {
        p1.innerText = "المدعي / الطرف الأول";
        p2.innerText = "المدعى عليه / الطرف الثاني";
    }
}

function generatePetition() {
    const type = document.getElementById('petitionType').value;
    const court = document.getElementById('courtName').value || "................";
    const party1 = document.getElementById('party1').value || "................";
    const party2 = document.getElementById('party2').value || "................";
    const output = document.getElementById('petitionOutput');

    if (!type) { alert("لطفاً اختر نوع العريضة"); return; }

    const template = legalTemplates[type];

    output.innerHTML = `
        <div style="font-family: 'Amiri', serif; padding: 40px; border: 1px solid #000; background: #fff;">
            <div style="text-align: right;">
                <strong>لدى محكمة:</strong> ${court}<br>
                <strong>التاريخ:</strong> ${new Date().toLocaleDateString('ar-EG')}م
            </div>

            <div style="margin: 40px 0;">
                <div style="display: flex; justify-content: space-between;">
                    <strong>${party1}</strong>
                    <span>(طرف أول)</span>
                </div>
                <div style="text-align: center; font-weight: bold; font-size: 1.4em; margin: 10px 0;">ضــــــــد</div>
                <div style="display: flex; justify-content: space-between;">
                    <strong>${party2}</strong>
                    <span>(طرف ثاني)</span>
                </div>
            </div>

            <div style="text-align: center; margin-bottom: 30px;">
                <h3 style="text-decoration: underline; font-weight: bold;">الموضوع / ${template.title}</h3>
            </div>

            <p style="margin-bottom: 20px;"><strong>${template.header}</strong></p>
            
            <p>بكل احترام، نلتمس من عدالة المحكمة الموقرة قيد دعوى/عريضة في مواجهة الطرف الثاني للأسباب الآتية:</p>
            
            <div style="white-space: pre-line; margin: 20px 0; line-height: 2;">${template.body}</div>

            <p><strong>بناءً عليه، نلتمس من عدالتكم الحكم بالآتي:</strong></p>
            <div style="padding: 15px; border-right: 4px solid #000; background: #fdfdfd; white-space: pre-line;">
                ${template.requests}
            </div>

            <div style="margin-top: 60px; text-align: left;">
                <p>ولعدالتكم وافر الشكر والتقدير،،</p>
                <br>
                <p>مقدم العريضة: .........................</p>
            </div>
        </div>
    `;
}
